<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <style>
  /* ================================ THEME Variablen (wie bei Einstellungen) ================================ */
  :root {
    --softrot: rgb(228,100,80);
    --dunkelblau: rgb(0,45,85);
    --hellblau: rgb(100,160,220);

    --bg: #f3f4f6;
    --text: #1f2937;
    --heading: #002d55;
    --link: #e06862;

    --card-bg: #ffffff;
    --card-border: #e5e7eb;

    --blassblau: rgb(230,240,250);
  }

  body.dark {
    --bg: #000000;
    --text: #f3f4f6;
    --heading: #f3f4f6;
    --link: #4da6ff;

    --card-bg: #151515;
    --card-border: #2c2c2c;
  }

  html, body {
    margin:0; padding:0; height:100%;
    background: var(--bg);
  }
  body {
    font-family: "Helvetica Neue", "Open Sans", Arial, sans-serif;
    color: var(--text);
  }

  .page-title { color: var(--softrot); margin: 0 0 1rem; padding: 1rem; }

  .dashboard-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 1.5rem;
    padding: 1rem;
  }
  @media (max-width: 1024px) { .dashboard-grid { grid-template-columns: 1fr; } }

  .card {
    background: var(--card-bg);
    color: var(--text);
    border: 1px solid var(--card-border);
    padding: 1.5rem;
    border-radius: 14px;
    box-shadow: 0 4px 18px rgba(0,0,0,0.28);
    margin-bottom: 1.5rem;
  }
  .card h3 {
    color: var(--hellblau);
    margin: 0 0 1rem;
    font-size: 1.1rem;
    display: flex; align-items: center; gap:.5rem;
  }

  .kpi-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px,1fr));
    gap: 1rem;
  }
  .kpi {
    background: var(--blassblau);
    border-radius: 12px;
    padding: 1rem;
    text-align: center;
  }
  body.dark .kpi { background: #222; }

  .kpi h4 { margin: 0; font-size: .9rem; color: var(--heading); }
  .kpi p { margin: .3rem 0 0; font-size: 1.4rem; font-weight: bold; }

  canvas { width: 100% !important; height: 260px !important; }

  .list { list-style:none; margin:0; padding:0; font-size:.95rem; }
  .list li {
    padding:.6rem 0; border-bottom:1px solid var(--card-border);
    display:flex; justify-content:space-between; align-items:center;
  }
  .list li:last-child { border-bottom:none; }
  .timestamp { font-size:.8rem; color:gray; }
  </style>
</head>

<script src="../js/firebase.js"></script>
<script src="../js/theme.js"></script>

<body>
  <h2 class="page-title">Dashboard</h2>

  <div class="dashboard-grid">
    <!-- Linke Spalte -->
    <div>
      <div class="card">
        <h3><i class="bi bi-graph-up"></i> Kennzahlen</h3>
        <div class="kpi-grid">
          <div class="kpi"><h4>Benutzer</h4><p>120</p></div>
          <div class="kpi"><h4>Module</h4><p>8</p></div>
          <div class="kpi"><h4>Fortschritt</h4><p>75%</p></div>
          <div class="kpi"><h4>Benachrichtigungen</h4><p>3</p></div>
        </div>
      </div>

      <div class="card">
        <h3><i class="bi bi-activity"></i> Aktivit√§t (7 Tage)</h3>
        <canvas id="activityChart"></canvas>
      </div>
    </div>

    <!-- Rechte Spalte -->
    <div>
      <div class="card">
        <h3><i class="bi bi-pie-chart"></i> Ressourcennutzung</h3>
        <canvas id="usageChart"></canvas>
      </div>

      <div class="card">
        <h3><i class="bi bi-check2-square"></i> To-Do</h3>
        <ul class="list">
          <li>Modul A abschlie√üen <span>‚è≥</span></li>
          <li>Material hochladen <span>‚è≥</span></li>
          <li>Feedback geben <span>‚úî</span></li>
        </ul>
      </div>

      <div class="card">
        <h3><i class="bi bi-clock-history"></i> Letzte Aktivit√§ten</h3>
        <ul class="list">
          <li>üë§ Neuer Benutzer <span class="timestamp">18.09. 10:30</span></li>
          <li>üì¶ Modul B abgeschlossen <span class="timestamp">17.09. 14:12</span></li>
          <li>üìÑ Dokument hochgeladen <span class="timestamp">16.09. 09:45</span></li>
        </ul>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Line Chart (Aktivit√§t)
    new Chart(document.getElementById("activityChart"), {
      type: "line",
      data: {
        labels: ["Mo","Di","Mi","Do","Fr","Sa","So"],
        datasets: [{
          label: "Aktivit√§t",
          data: [3,5,2,8,6,7,4],
          borderColor: "rgb(228,100,80)",
          backgroundColor: "rgba(228,100,80,0.3)",
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        plugins:{ legend:{labels:{color: "var(--text)"}} },
        scales:{ x:{ticks:{color:"var(--text)"}}, y:{ticks:{color:"var(--text)"}} }
      }
    });

    // Doughnut Chart (Ressourcen)
    new Chart(document.getElementById("usageChart"), {
      type: "doughnut",
      data: {
        labels: ["Disk", "CDN", "Besuche"],
        datasets: [{
          data: [70, 20, 10],
          backgroundColor: ["rgb(0,45,85)", "rgb(228,100,80)", "rgb(100,160,220)"]
        }]
      },
      options: { plugins:{ legend:{labels:{color:"var(--text)"}} } }
    });
  </script>
</body>
</html>
